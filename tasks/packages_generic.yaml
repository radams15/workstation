- name: Install General Native Packages
  become: true
  package:
    name: "{{ packages_general }}"
    state: latest

- name: Add Flathub Remote
  become: true
  flatpak_remote:
    name: flathub
    state: present
    flatpakrepo_url: https://dl.flathub.org/repo/flathub.flatpakrepo
    method: system

- name: Install Flatpak Packages
  become: true
  flatpak:
    name: "{{ item }}"
    method: system
    state: present
  loop: "{{ flatpaks }}"


- name: Install Distrobox
  become: true
  shell: |
    curl -s https://raw.githubusercontent.com/89luca89/distrobox/main/install | sudo sh

- name: Install User Binaries
  get_url:
    url: "{{ item.url }}"
    dest: "{{ item.dest }}"
    mode: '0777'
    owner: rhys
  loop: "{{ binaries }}"

